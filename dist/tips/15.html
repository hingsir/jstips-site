<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A JS tip per day!</title>
    <link rel="stylesheet" type="text/css" href="../css/github_1.css">
    <link rel="stylesheet" type="text/css" href="../css/github_2.css">
    <link rel="stylesheet" type="text/css" href="../js/highlight/styles/github.css">
    <link rel="stylesheet" type="text/css" href="../css/index.css">
</head>
</head>
<body>
    <div class="main-content clearfix">
        <div id="sider-wrap">
            <div class="sider-header">
                <h1><a href="https://github.com/loverajoel/jstips">A JS tip per day</a></h1>
            </div>
            <ul>
    
        <li><a href="22.html" class=""
		 title="22.Empty an Array">22.Empty an Array</a></li>
    
        <li><a href="21.html" class=""
		 title="21.Shuffle an Array">21.Shuffle an Array</a></li>
    
        <li><a href="20.html" class=""
		 title="20.Return objects to enable chaining of functions">20.Return objects to enable chaining of functions</a></li>
    
        <li><a href="19.html" class=""
		 title="19.Safe string concatenation">19.Safe string concatenation</a></li>
    
        <li><a href="18.html" class=""
		 title="18.Rounding the fast way">18.Rounding the fast way</a></li>
    
        <li><a href="17.html" class=""
		 title="17.Node.js: Run a module if it is not &#34;required&#34;">17.Node.js: Run a module if it is not &#34;required&#34;</a></li>
    
        <li><a href="16.html" class=""
		 title="16.Passing arguments to callback functions">16.Passing arguments to callback functions</a></li>
    
        <li><a href="15.html" class="cur"
		 title="15.Even simpler way of using indexOf as a contains clause">15.Even simpler way of using indexOf as a contains clause</a></li>
    
        <li><a href="14.html" class=""
		 title="14.Fat Arrow Functions #ES6">14.Fat Arrow Functions #ES6</a></li>
    
        <li><a href="13.html" class=""
		 title="13.Tip to measure performance of a javascript block">13.Tip to measure performance of a javascript block</a></li>
    
        <li><a href="12.html" class=""
		 title="12.Pseudomandatory parameters in ES6 functions #ES6">12.Pseudomandatory parameters in ES6 functions #ES6</a></li>
    
        <li><a href="11.html" class=""
		 title="11.Hoisting">11.Hoisting</a></li>
    
        <li><a href="10.html" class=""
		 title="10.Check if a property is in a Object">10.Check if a property is in a Object</a></li>
    
        <li><a href="09.html" class=""
		 title="09.Template Strings">09.Template Strings</a></li>
    
        <li><a href="08.html" class=""
		 title="08.Converting a Node List to an Array">08.Converting a Node List to an Array</a></li>
    
        <li><a href="07.html" class=""
		 title="07.&#34;use strict&#34; and get lazy">07.&#34;use strict&#34; and get lazy</a></li>
    
        <li><a href="06.html" class=""
		 title="06.Writing a single method for arrays and a single element">06.Writing a single method for arrays and a single element</a></li>
    
        <li><a href="05.html" class=""
		 title="05.Differences between `undefined` and `null`">05.Differences between `undefined` and `null`</a></li>
    
        <li><a href="04.html" class=""
		 title="04.Sorting strings with accented characters">04.Sorting strings with accented characters</a></li>
    
        <li><a href="03.html" class=""
		 title="03.Improve Nested Conditionals">03.Improve Nested Conditionals</a></li>
    
        <li><a href="02.html" class=""
		 title="02.ReactJs - Keys in children components are important">02.ReactJs - Keys in children components are important</a></li>
    
        <li><a href="1.html" class=""
		 title="1.AngularJs: `$digest` vs `$apply`">1.AngularJs: `$digest` vs `$apply`</a></li>
    
        <li><a href="0.html" class=""
		 title="0.Insert item inside an Array">0.Insert item inside an Array</a></li>
    
</ul>        </div>
        <div id="content-wrap">
             <div id="readme" class="boxed-group clearfix announce instapaper_body md">
 	<article class="markdown-body entry-content" itemprop="mainContentOfPage">
 		<h2 id="-15-even-simpler-way-of-using-indexof-as-a-contains-clause">#15 - Even simpler way of using indexOf as a contains clause</h2>
<blockquote>
<p>2016-01-15 by <a href="https://twitter.com/jhogoforbroke">@jhogoforbroke</a></p>
</blockquote>
<p>JavaScript by default does not have a contains method. And for checking existence of a substring in a string or an item in an array you may do this:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> someText = <span class="hljs-string">'javascript rules'</span>;
<span class="hljs-keyword">if</span> (someText.indexOf(<span class="hljs-string">'javascript'</span>) !== <span class="hljs-number">-1</span>) {
}

<span class="hljs-comment">// or</span>
<span class="hljs-keyword">if</span> (someText.indexOf(<span class="hljs-string">'javascript'</span>) &gt;= <span class="hljs-number">0</span>) {
}
</code></pre>
<p>But let&#39;s look at these <a href="https://github.com/strongloop/express">Expressjs</a> code snippets.</p>
<p><a href="https://github.com/strongloop/express/blob/2f8ac6726fa20ab5b4a05c112c886752868ac8ce/examples/mvc/lib/boot.js#L26">examples/mvc/lib/boot.js</a></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> key <span class="hljs-keyword">in</span> obj) {
  <span class="hljs-comment">// "reserved" exports</span>
  <span class="hljs-keyword">if</span> (~[<span class="hljs-string">'name'</span>, <span class="hljs-string">'prefix'</span>, <span class="hljs-string">'engine'</span>, <span class="hljs-string">'before'</span>].indexOf(key)) <span class="hljs-keyword">continue</span>;
</code></pre>
<p><a href="https://github.com/strongloop/express/blob/2f8ac6726fa20ab5b4a05c112c886752868ac8ce/lib/utils.js#L93">lib/utils.js</a></p>
<pre><code class="lang-javascript">exports.normalizeType = <span class="hljs-keyword">function</span>(<span class="hljs-class"><span class="hljs-keyword">type</span>){</span>
  <span class="hljs-keyword">return</span> ~<span class="hljs-class"><span class="hljs-keyword">type</span>.<span class="hljs-title">indexOf</span></span>('/')
    ? acceptParams(<span class="hljs-class"><span class="hljs-keyword">type</span>)</span>
    : { value: mime.lookup(<span class="hljs-class"><span class="hljs-keyword">type</span>), <span class="hljs-title">params</span>: {} };</span>
};
</code></pre>
<p><a href="https://github.com/strongloop/express/blob/2f8ac6726fa20ab5b4a05c112c886752868ac8ce/examples/web-service/index.js#L35">examples/web-service/index.js</a></p>
<pre><code class="lang-javascript">// key is invalid
if (!~apiKeys.indexOf(<span class="hljs-name">key</span>)) return next(<span class="hljs-name">error</span>(<span class="hljs-number">401</span>, 'invalid api key'))<span class="hljs-comment">;</span>
</code></pre>
<p>The gotcha is the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators">bitwise operator</a> <strong>~</strong>, &quot;Bitwise operators perform their operations on binary representations, but they return standard JavaScript numerical values.&quot;</p>
<p>It transforms <code>-1</code> into <code>0</code>, and <code>0</code> evaluates to <code>false</code> in JavaScript:</p>
<pre><code class="lang-javascript">var someText = <span class="hljs-string">'text'</span>;
!!~someText.indexOf(<span class="hljs-string">'tex'</span>); <span class="hljs-regexp">//</span> someText contains <span class="hljs-string">"tex"</span> - <span class="hljs-keyword">true</span>
!~someText.indexOf(<span class="hljs-string">'tex'</span>); <span class="hljs-regexp">//</span> someText NOT contains <span class="hljs-string">"tex"</span> - <span class="hljs-keyword">false</span>
~someText.indexOf(<span class="hljs-string">'asd'</span>); <span class="hljs-regexp">//</span> someText doesn<span class="hljs-string">'t contain "asd" - false
~someText.indexOf('</span>ext<span class="hljs-string">'); // someText contains "ext" - true</span>
</code></pre>
<h3 id="string-prototype-includes-">String.prototype.includes()</h3>
<p>ES6 introduced the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes">includes() method</a> and you can use it to determine whether or not a string includes another string:</p>
<pre><code class="lang-javascript"><span class="hljs-string">'something'</span>.includes(<span class="hljs-string">'thing'</span>); <span class="hljs-regexp">//</span> <span class="hljs-keyword">true</span>
</code></pre>
<p>With ECMAScript 2016 (ES7) it is even possible to use these techniques with Arrays:</p>
<pre><code class="lang-javascript">!!~<span class="hljs-selector-attr">[1, 2, 3]</span><span class="hljs-selector-class">.indexOf</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>
<span class="hljs-selector-attr">[1, 2, 3]</span><span class="hljs-selector-class">.includes</span>(<span class="hljs-number">1</span>); <span class="hljs-comment">// true</span>
</code></pre>
<p><strong>Unfortunately, it is only supported in Chrome, Firefox, Safari 9 or above and Edge; not IE11 or lower.</strong>
<strong>It&#39;s better used in controlled environments.</strong></p>
 	</article>
</div>
            <div class="site-footer">
                <p class="copyright">Powered by <a href="https://github.com/hingsir">@hingsir</a>, 2016</p>
            </div>
        </div>
    </div>
    <a href="https://github.com/hingsir"><img style="position: absolute; top: 0; right: 0; border: 0;z-index:100;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
</body>
</html>